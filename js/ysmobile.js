"use strict";var btn=document.querySelector(".submit");function submit(e){e.preventDefault();var t=document.querySelector("[name='username']").value;if(""===t)return layer.msg("用户名必填"),!1;if(!/^[a-zA-Z][a-zA-Z0-9]{2,7}$/.test(t))return layer.msg("用户名：字母开头，字母、数字组成，3~8位"),!1;var r=document.querySelector("[name='password']").value;if(""===r)return layer.msg("密码必填"),!1;if(!/^[a-zA-Z0-9]{6,12}$/.test(r))return layer.msg("密码：数字、字母自称，6~12位"),!1;if(document.querySelector("[name='repass']").value!==r)return layer.msg("两次不一致"),!1;var a=document.querySelector("[name='email']").value;if(""===a)return layer.msg("邮箱必填"),!1;if(!/(^[a-zA-Z]\w{3,11}@(126|163)\.com$)|(^1\d{4,11}@qq\.com$)/.test(a))return layer.msg("请输入正确的邮箱"),!1;e=document.querySelector("[name='tel']").value;if(""===e)return layer.msg("手机号必填"),!1;if(!/^1[3-9]\d{9}$/.test(e))return layer.msg("请输入正确的手机号"),!1;if(!document.querySelector("[name='agree']").checked)return layer.msg("请同意协议"),!1;var n=layer.load(1,{shade:[.5,"#666"]});btn.disabled=!0,pAjax({url:"../lib/php/register.php",data:{username:t,password:r,tel:e,email:a},type:"post"}).then(function(e){layer.close(n),console.log(1);var t=e.meta,e=t.status,t=t.msg,r=layer.msg(t);if(0!==e)return btn.disabled=!1;setTimeout(function(){layer.close(r),location.href="ysmain.html"},2e3)})}btn.addEventListener("click",submit),document.getElementById("t1").addEventListener("submit",function(e){e.preventDefault()});